language: ruby
rvm:
- 2.6.1
- ruby-head
# gemfile: "gems.rb"
addons:
  postgresql: "9.6"
before_install: bundle update --bundler # Fix for ruby-head tests
before_script:
- cp config/.travis.database.yml config/database.yml
- psql -c 'create database travis_test;' -U postgres
matrix:
  allow_failures:
  - rvm: ruby-head
deploy:
  provider: elasticbeanstalk
  access_key_id: $AWS_ACCESS_KEY
  secret_access_key: $AWS_SECRET_KEY
  region: us-east-1
  app: lofthf.study
  env: loft-hf-production
  bucket_name: elasticbeanstalk-us-east-1-910353042999
  on:
    repo: sleepepi/lofthf.study
    branch: master
    rvm: 2.6.1
