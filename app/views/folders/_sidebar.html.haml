- @categories = Category.all

.col-12.col-md-3.col-xl-2.sidebar-wrapper
  .sidebar
    #sidebar-nav-wrapper.sidebar-nav-wrapper.collapse.pt-3.py-md-3
      .mx-3.my-0.ml-md-3.mb-md-3.mr-md-0
        %ul.sidebar-menu.sidebar-menu-shadow
          %li.sidebar-menu-header= render "sidebar/toggle", title: "Docs"
          %li= link_to "Overview", folders_path, class: current_page?(folders_path) ? "active" : nil
          - if @categories.present?
            - @categories.includes(:folders).each do |category|
              %li.sidebar-menu-header= category.name
              - category.folders.each do |folder|
                %li= link_to folder.name, category_folder_path(category, folder), class: @folder&.id == folder.id ? "active" : nil

      - if current_user.editor?
        .mx-3.my-0.ml-md-3.mb-md-3.mr-md-0
          %ul.sidebar-menu.sidebar-menu-shadow
            %li.sidebar-menu-header Editor
            %li
              = link_to new_folder_path, class: @folder&.new_record? ? "active" : nil do
                = icon("fas", "folder-open")
                Add folder
